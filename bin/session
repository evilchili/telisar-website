#!/bin/bash -e

# read the session counter
SESSION_COUNTER=~/.last_session
if [ -e $SESSION_COUNTER ]; then
    SESSION_NUMBER=$(expr $(cat $SESSION_COUNTER) + 1)
else
    SESSION_NUMBER=1
fi

FILENAME="episode_${SESSION_NUMBER}_$(echo ${@:1} | awk '{ print tolower($0) }' | tr -s ' ' '_').md"

/usr/local/bin/hugo new -k session --editor $EDITOR "posts/$FILENAME"

echo $SESSION_NUMBER > $SESSION_COUNTER
