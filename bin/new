#!/bin/bash -e

TYPE=$1
if [ "$TYPE" = "session" ]; then
    SCRIPTDIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
    exec $SCRIPTDIR/session $*
else
    FILENAME=$(echo ${@:2} | awk '{ print tolower($0) }' | tr -s ' ' '_').md
    if [ "$TYPE" = "monster" ]; then
        SUBDIR="posts"
    else
        SUBDIR="beastiary"
    fi
    /usr/local/bin/hugo new -k $TYPE --editor $EDITOR "$SUBDIR/$FILENAME"
fi
